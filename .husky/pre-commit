# Run gitleaks for secret detection (if installed)
if command -v gitleaks > /dev/null 2>&1; then
  gitleaks protect --staged --verbose
else
  echo "Warning: gitleaks not installed. Skipping secret detection."
  echo "Install with: brew install gitleaks (macOS) or see https://github.com/gitleaks/gitleaks#installing"
fi

npx lint-staged
pnpm typecheck
pnpm test
